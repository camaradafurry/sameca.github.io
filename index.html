<html>
  <head>
    <!-- Load the AJAX API -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['corechart'] });
      google.charts.setOnLoadCallback(fetchAndDrawColumnChart);

      function fetchAndDrawColumnChart() {
        console.log("laudo0011");
        // Fetch data from the external file
        fetch('dados/pacientesMes.json')
          .then(response => response.json())
          .then(data => {
            // Check if the data is an array
            if (Array.isArray(data)) {
              // Add the header to the data
              data.unshift(['Mês', 'Novas entradas de Pacientes']);
              // Call the drawColumnChart function with the loaded data
              drawColumnChart(data);
            } else {
              console.error('Invalid data format. Expected an array.');
            }
          })
          .catch(error => console.error('Error fetching data:', error));
      }

      function drawColumnChart(paciMes) {
        console.log(JSON.stringify(paciMes));
        var data = google.visualization.arrayToDataTable(paciMes);

        var options = {
          title: 'Pacientes por Mês - SAMECA',
          chartArea: { width: '50%', height: '80%' }, // Adjusted height percentage
          isStacked: false,
          hAxis: {
            title: 'Mês',
            slantedText: true,
            slantedTextAngle: 45
          },
          vAxis: {
            title: 'Pacientes',
            minValue: 0,
          }
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!-- Div that will hold the column chart -->
    <div id="chart_div"></div>
  </body>
</html>
